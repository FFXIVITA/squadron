var sqMissionSolver={};$(function(){sqMissionSolver={stats:{marauder:[[60,12,24],[61,12,25],[63,12,25],[64,12,26],[65,13,26],[66,13,27],[66,14,28],[68,14,28],[70,14,28],[72,14,28],[73,15,28],[74,15,29],[74,16,30],[75,16,31],[77,16,31],[78,16,32],[79,17,32],[80,17,33],[80,18,34],[82,18,34],[84,18,34],[86,18,34],[87,19,34],[88,19,35],[88,20,36],[89,20,37],[91,20,37],[92,20,38],[93,21,38],[94,21,39],[94,22,40],[96,22,40],[98,22,40],[100,22,40],[101,23,40],[102,23,41],[102,24,42],[103,24,43],[105,24,43],[106,24,44],[107,25,44],[108,25,45],[108,26,46],[110,26,46],[112,26,46],[114,26,46],[115,27,46],[116,27,47],[116,28,48],[117,28,49],[119,28,49],[120,28,50],[121,29,50],[122,29,51],[122,30,52],[124,30,52],[126,30,52],[128,30,52],[129,31,52],[130,31,53]],gladiator:[[48,12,36],[50,12,36],[52,12,36],[54,12,36],[55,13,36],[56,13,37],[56,14,38],[57,14,39],[59,14,39],[60,14,40],[61,15,40],[62,15,41],[62,16,42],[64,16,42],[66,16,42],[68,16,42],[69,17,42],[70,17,43],[70,18,44],[71,18,45],[73,18,45],[74,18,46],[75,19,46],[76,19,47],[76,20,48],[78,20,48],[80,20,48],[82,20,48],[83,21,48],[84,21,49],[84,22,50],[85,22,51],[87,22,51],[88,22,52],[89,23,52],[90,23,53],[90,24,54],[92,24,54],[94,24,54],[96,24,54],[97,25,54],[98,25,55],[98,26,56],[99,26,57],[101,26,57],[102,26,58],[103,27,58],[104,27,59],[104,28,60],[106,28,60],[108,28,60],[110,28,60],[111,29,60],[112,29,61],[112,30,62],[113,30,63],[115,30,63],[116,30,64],[117,31,64],[118,31,65]],archer:[[12,12,72],[13,12,73],[13,12,75],[14,12,76],[14,13,77],[15,13,78],[16,14,78],[17,14,79],[17,14,81],[18,14,82],[18,15,83],[19,15,84],[20,16,84],[21,16,85],[21,16,87],[22,16,88],[22,17,89],[23,17,90],[24,18,90],[25,18,91],[25,18,93],[26,18,94],[26,19,95],[27,19,96],[28,20,96],[29,20,97],[29,20,99],[30,20,100],[30,21,101],[31,21,102],[32,22,102],[33,22,103],[33,22,105],[34,22,106],[34,23,107],[35,23,108],[36,24,108],[37,24,109],[37,24,111],[38,24,112],[38,25,113],[39,25,114],[40,26,114],[41,26,115],[41,26,117],[42,26,118],[42,27,119],[43,27,120],[44,28,120],[45,28,121],[45,28,123],[46,28,124],[46,29,125],[47,29,126],[48,30,126],[49,30,127],[49,30,129],[50,30,130],[50,31,131],[51,31,132]],rogue:[[24,12,60],[24,12,62],[24,12,64],[24,12,66],[24,13,67],[25,13,68],[26,14,68],[27,14,69],[27,14,71],[28,14,72],[28,15,73],[29,15,74],[30,16,74],[30,16,76],[30,16,78],[30,16,80],[30,17,81],[31,17,82],[32,18,82],[33,18,83],[33,18,85],[34,18,86],[34,19,87],[35,19,88],[36,20,88],[36,20,90],[36,20,92],[36,20,94],[36,21,95],[37,21,96],[38,22,96],[39,22,97],[39,22,99],[40,22,100],[40,23,101],[41,23,102],[42,24,102],[42,24,104],[42,24,106],[42,24,108],[42,25,109],[43,25,110],[44,26,110],[45,26,111],[45,26,113],[46,26,114],[46,27,115],[47,27,116],[48,28,116],[48,28,118],[48,28,120],[48,28,122],[48,29,123],[49,29,124],[50,30,124],[51,30,125],[51,30,127],[52,30,128],[52,31,129],[53,31,130]],lancer:[[36,12,48],[37,12,49],[37,12,51],[38,12,52],[38,13,53],[39,13,54],[40,14,54],[40,14,56],[40,14,58],[40,14,60],[40,15,61],[41,15,62],[42,16,62],[43,16,63],[43,16,65],[44,16,66],[44,17,67],[45,17,68],[46,18,68],[46,18,70],[46,18,72],[46,18,74],[46,19,75],[47,19,76],[48,20,76],[49,20,77],[49,20,79],[50,20,80],[50,21,81],[51,21,82],[52,22,82],[52,22,84],[52,22,86],[52,22,88],[52,23,89],[53,23,90],[54,24,90],[55,24,91],[55,24,93],[56,24,94],[56,25,95],[57,25,96],[58,26,96],[58,26,98],[58,26,100],[58,26,102],[58,27,103],[59,27,104],[60,28,104],[61,28,105],[61,28,107],[62,28,108],[62,29,109],[63,29,110],[64,30,110],[64,30,112],[64,30,114],[64,30,116],[64,31,117],[65,31,118]],pugilist:[[36,24,36],[37,24,37],[37,24,39],[38,24,40],[38,25,41],[39,25,42],[40,26,42],[41,26,43],[41,26,45],[42,26,46],[42,27,47],[43,27,48],[44,28,48],[45,28,49],[45,28,51],[46,28,52],[46,29,53],[47,29,54],[48,30,54],[49,30,55],[49,30,57],[50,30,58],[50,31,59],[51,31,60],[52,32,60],[53,32,61],[53,32,63],[54,32,64],[54,33,65],[55,33,66],[56,34,66],[57,34,67],[57,34,69],[58,34,70],[58,35,71],[59,35,72],[60,36,72],[61,36,73],[61,36,75],[62,36,76],[62,37,77],[63,37,78],[64,38,78],[65,38,79],[65,38,81],[66,38,82],[66,39,83],[67,39,84],[68,40,84],[69,40,85],[69,40,87],[70,40,88],[70,41,89],[71,41,90],[72,42,90],[73,42,91],[73,42,93],[74,42,94],[74,43,95],[75,43,96]],conjurer:[[12,72,12],[12,73,13],[12,75,13],[12,76,14],[13,77,14],[13,78,15],[14,78,16],[14,80,16],[14,82,16],[14,84,16],[15,85,16],[15,86,17],[16,86,18],[16,87,19],[16,89,19],[16,90,20],[17,91,20],[17,92,21],[18,92,22],[18,94,22],[18,96,22],[18,98,22],[19,99,22],[19,100,23],[20,100,24],[20,101,25],[20,103,25],[20,104,26],[21,105,26],[21,106,27],[22,106,28],[22,108,28],[22,110,28],[22,112,28],[23,113,28],[23,114,29],[24,114,30],[24,115,31],[24,117,31],[24,118,32],[25,119,32],[25,120,33],[26,120,34],[26,122,34],[26,124,34],[26,126,34],[27,127,34],[27,128,35],[28,128,36],[28,129,37],[28,131,37],[28,132,38],[29,133,38],[29,134,39],[30,134,40],[30,136,40],[30,138,40],[30,140,40],[31,141,40],[31,142,41]],thaumaturge:[[12,60,24],[12,61,25],[12,63,25],[12,64,26],[13,65,26],[13,66,27],[14,66,28],[14,67,29],[14,69,29],[14,70,30],[15,71,30],[15,72,31],[16,72,32],[16,73,33],[16,75,33],[16,76,34],[17,77,34],[17,78,35],[18,78,36],[18,79,37],[18,81,37],[18,82,38],[19,83,38],[19,84,39],[20,84,40],[20,85,41],[20,87,41],[20,88,42],[21,89,42],[21,90,43],[22,90,44],[22,91,45],[22,93,45],[22,94,46],[23,95,46],[23,96,47],[24,96,48],[24,97,49],[24,99,49],[24,100,50],[25,101,50],[25,102,51],[26,102,52],[26,103,53],[26,105,53],[26,106,54],[27,107,54],[27,108,55],[28,108,56],[28,109,57],[28,111,57],[28,112,58],[29,113,58],[29,114,59],[30,114,60],[30,115,61],[30,117,61],[30,118,62],[31,119,62],[31,120,63]],arcanist:[[12,48,36],[12,49,37],[12,51,37],[12,52,38],[13,53,38],[13,54,39],[14,54,40],[14,55,41],[14,57,41],[14,58,42],[15,59,42],[15,60,43],[16,60,44],[16,61,45],[16,63,45],[16,64,46],[17,65,46],[17,66,47],[18,66,48],[18,67,49],[18,69,49],[18,70,50],[19,71,50],[19,72,51],[20,72,52],[20,73,53],[20,75,53],[20,76,54],[21,77,54],[21,78,55],[22,78,56],[22,79,57],[22,81,57],[22,82,58],[23,83,58],[23,84,59],[24,84,60],[24,85,61],[24,87,61],[24,88,62],[25,89,62],[25,90,63],[26,90,64],[26,91,65],[26,93,65],[26,94,66],[27,95,66],[27,96,67],[28,96,68],[28,97,69],[28,99,69],[28,100,70],[29,101,70],[29,102,71],[30,102,72],[30,103,73],[30,105,73],[30,106,74],[31,107,74],[31,108,75]]},exp:[1000,1100,1200,1300,1400,1500,1600,1700,1800,2000,2200,2400,2600,2800,3000,3200,3400,3600,3800,4100,4400,4700,5000,5300,5600,5900,6200,6500,6800,7200,7600,8000,8400,8800,9200,9600,10000,10400,11000,12000,13000,14000,15000,16000,18000,20000,22000,24000,26000,28000,46500,51000,55500,60000,66000,72000,78000,84000,90000],missionGoals:[],squadronRank:0,bonusSquadron:[],squadron:[],trainings:[[40,-20,-20],[-20,40,-20],[-20,-20,40],[20,20,-40],[20,-40,20],[-40,20,20],[0,0,0]],expTrainings:[2000,2000,2000,2000,2000,2000,3000],chemistry:"",bonusChemistryAlmost:"",missionBonus:[],activeSquadron:1,maxTrainings:3,almostMatching:[],missionLevel:0,allDifferentClass:false,allDifferentRace:false,classes:{marauder:0,gladiator:1,archer:2,rogue:3,lancer:4,pugilist:5,conjurer:6,thaumaturge:7,arcanist:8},nonMandatoryChem:["chem_percentage","cont_off","cont_def","cont_mag","doh_materia","dol_materia","dom_materia","tank_materia","clusters","gat_scrips","cra_scrips","seals","mgp","gil","chem_percentage"],init:function(){if(localStorage.getItem("squadron")!=null&&!Cookies.get("message-esper")){$("#overlay").show();$("#close-message").on("click",function(){sqMissionSolver.closeMessage()})}if(localStorage.getItem("squadronNames")==null){var a={"1":"Squadrone 1","2":"Squadrone 2","3":"Squadrone 3","4":"Squadrone 4","5":"Squadrone 5"};localStorage.setItem("squadronNames",JSON.stringify(a));sqMissionSolver.updateSquadronNames()}else{sqMissionSolver.updateSquadronNames()}sqMissionSolver.load();sqMissionSolver.squadronRank=parseInt($("#rank").val());sqMissionSolver.bonusSquadron=[parseInt($("#b-phy").val()),parseInt($("#b-men").val()),parseInt($("#b-tac").val())];sqMissionSolver.missionBonus=[$("#mission-bonus-1").val(),$("#mission-bonus-2").val(),$("#mission-bonus-3").val()];sqMissionSolver.maxTrainings=parseInt($("#max-trainings").val())>6?6:parseInt($("#max-trainings").val());$("#resolve").on("click",function(){sqMissionSolver.resolve()});$("#rank, select.recruit, .race-recruit, .name-recruit, .mission-bonus, .use-recruit").on("change",function(){sqMissionSolver.save()});$("#rank").on("change",function(){sqMissionSolver.squadronRank=parseInt($("#rank").val())});$("input.value").on("keyup",function(){sqMissionSolver.save()});$("select.level-recruit").on("change",function(){sqMissionSolver.setExp(this);sqMissionSolver.checkCurrentExp($("#exp-recruit-"+this.id.slice(-1)));sqMissionSolver.save()});$(".exp-recruit").on("blur",function(){sqMissionSolver.checkCurrentExp(this);sqMissionSolver.save()});$(".training-icon").on("click",function(){sqMissionSolver.setActiveTraining(this)});$("#b-apply-exp-reward").on("click",function(){sqMissionSolver.addExp()});$("select.recruit, select.level-recruit, select.race-recruit, select.name-recruit").on("change",function(){sqMissionSolver.generateSquadron();sqMissionSolver.updateClassesExp()});$("#mission-exp-reward").on("click","#select-classes-exp img",function(){sqMissionSolver.setClassesForExp(this);sqMissionSolver.unlockXpButton()});$("#b-apply-training").on("click",function(){sqMissionSolver.activeConfirmTraining()});$("#b-confirm-training").on("click",function(){sqMissionSolver.applyTraining()});$(".image-chemistry").on("click",function(){sqMissionSolver.openChemistry(this)});$("#apply-chemistry").on("click",function(){sqMissionSolver.applyChemistry()});$("#delete-chemistry").on("click",function(){sqMissionSolver.deleteChemistry()});$(".mission-bonus").on("change",function(){sqMissionSolver.updateMissionBonus()});$("#b-phy, #b-men, #b-tac").on("blur",function(){sqMissionSolver.bonusSquadron=[parseInt($("#b-phy").val()),parseInt($("#b-men").val()),parseInt($("#b-tac").val())]});$("#squadrons-list a").on("click",function(){sqMissionSolver.setActiveSquadron($(this),true)});$("#rename").on("click",function(){sqMissionSolver.openRenameSquadrons()});$("#clear-results").on("click",function(){$("#possible, #processed").html("");$("#how-to-use").show()});$("#export").on("click",function(){sqMissionSolver.openExportSquadron()});$("#import").on("click",function(){sqMissionSolver.openImportSquadron()});$("#import-squadron").on("click",function(){sqMissionSolver.importSquadron()});$("#clear").on("click",function(){sqMissionSolver.openClearSquadron()});$("#squadron .lines-recruits").sortable({handle:".recruit-number",update:function(b,c){sqMissionSolver.updateOrder(b,c)}});$("#max-trainings").on("blur",function(){if(parseInt($(this).val())>6){$(this).val(6)}sqMissionSolver.maxTrainings=parseInt($(this).val())});$("#command-exp-reward").on("keydown",function(){$("#trainee-exp-reward").val("")});$("#trainee-exp-reward").on("keydown",function(){$("#command-exp-reward").val("")});$("#apply-rename").on("click",function(){sqMissionSolver.applyRenameSquadron()});$("#command-exp-reward, #trainee-exp-reward").on("keydown",function(){setTimeout(function(){sqMissionSolver.unlockXpButton()},1)})},unlockXpButton:function(){var a=$("#select-classes-exp > img.active").length;if((a==3&&parseInt($("#command-exp-reward").val())>0)||a==4&&parseInt($("#trainee-exp-reward").val())>0){$("#b-apply-exp-reward").attr("disabled",false)}else{$("#b-apply-exp-reward").attr("disabled",true)}},closeMessage:function(){$("#overlay").hide();Cookies.set("message-esper",1,{expires:10000})},updateSquadronNames:function(){var b=JSON.parse(localStorage.getItem("squadronNames"));for(var a=1;a<=5;a++){$("#squadron-"+a).html(b[a])}},reset:function(){$("#possible").html("");sqMissionSolver.squadronRank=parseInt($("#rank").val());sqMissionSolver.bonusSquadron=[parseInt($("#b-phy").val()),parseInt($("#b-men").val()),parseInt($("#b-tac").val())];sqMissionSolver.missionBonus=[$("#mission-bonus-1").val(),$("#mission-bonus-2").val(),$("#mission-bonus-3").val()];sqMissionSolver.missionGoals=[parseInt($("#phy").val()),parseInt($("#men").val()),parseInt($("#tac").val())];sqMissionSolver.maxTrainings=parseInt($("#max-trainings").val())>6?6:parseInt($("#max-trainings").val());sqMissionSolver.squadron=[];sqMissionSolver.almostMatching=[];sqMissionSolver.missionLevel=parseInt($("#m-level").val());sqMissionSolver.generateSquadron()},load:function(){var a=sqMissionSolver.getSquadron();if(a===null){var a={activeSquadron:"1","1":{},"2":{},"3":{},"4":{},"5":{}};localStorage.setItem("squadron",JSON.stringify(a))}else{sqMissionSolver.activeSquadron=a.activeSquadron;sqMissionSolver.setActiveSquadron($("#squadron-"+sqMissionSolver.activeSquadron));if(Object.keys(a[sqMissionSolver.activeSquadron]).length==0){sqMissionSolver.clearForms()}$(".image-chemistry").removeClass("active");$.each(a[sqMissionSolver.activeSquadron],function(b,c){if($("#"+b).prop("type")!=="undefined"&&$("#"+b).prop("type")==="checkbox"){$("#"+b).removeProp("checked");if(c==true||c=="true"){$("#"+b).prop("checked",c)}}else{$("#"+b).val(c)}if(b.match(/^chemistry-recruit-[0-9]/)!==null&&c!=""){$("#"+b).prev().addClass("active")}})}sqMissionSolver.generateSquadron();sqMissionSolver.updateClassesExp()},save:function(){var a=$("select.recruit, select.level-recruit, input.value, #rank, .race-recruit, .exp-recruit, .chemistry, .use-recruit, .mission-bonus, #m-level, #max-trainings, .name-recruit");var b=sqMissionSolver.getSquadron();b[sqMissionSolver.activeSquadron]={};a.each(function(){if($(this).prop("type")!=="undefined"&&$(this).prop("type")==="checkbox"){b[sqMissionSolver.activeSquadron][this.id]=$(this).prop("checked")}else{b[sqMissionSolver.activeSquadron][this.id]=this.value}});localStorage.setItem("squadron",JSON.stringify(b));sqMissionSolver.generateSquadron()},updateOrder:function(a,b){$(".sortable").each(function(c){$(this).children().each(function(){if(this.id!==""){this.id=this.id.slice(0,-1)+(c+1)}if(this.className=="recruit-number"){$(this).html(c+1+".")}})});sqMissionSolver.save();sqMissionSolver.generateSquadron();sqMissionSolver.updateClassesExp()},getSquadron:function(){return JSON.parse(localStorage.getItem("squadron"))},capitalize:function(a){if(a==""||typeof a=="undefined"){return a}return a[0].toUpperCase()+a.slice(1)},clearForms:function(){$("#select-classes-exp").html("");$("select.recruit, select.level-recruit, .race-recruit, .name-recruit, .chemistry, .mission-bonus").val("");$(".exp-recruit, #m-level, input.value").val("0");$("#rank").val("200");$("#max-trainings").val("3");$(".image-chemistry").removeClass("active")},saveFromObject:function(){var a=$("select.recruit, select.level-recruit, input.value, #rank, .race-recruit, .exp-recruit, .chemistry, .use-recruit, .mission-bonus, #m-level, #max-trainings, .name-recruit");var b=sqMissionSolver.getSquadron();b[sqMissionSolver.activeSquadron]={};a.each(function(){var c=this.id.split("-");c=Number(c[c.length-1]);c--;if(this.id.match(/^recruit-[0-9]/)!==null){b[sqMissionSolver.activeSquadron][this.id]=typeof sqMissionSolver.squadron[c][2]!=="undefined"?sqMissionSolver.squadron[c][2].toString():""}else{if(this.id.match(/^level-recruit-[0-9]/)!==null){b[sqMissionSolver.activeSquadron][this.id]=typeof sqMissionSolver.squadron[c][3]!=="undefined"?sqMissionSolver.squadron[c][3].toString():""}else{if(this.id.match(/^race-recruit-[0-9]/)!==null){b[sqMissionSolver.activeSquadron][this.id]=typeof sqMissionSolver.squadron[c][4]!=="undefined"?sqMissionSolver.squadron[c][4].toString():""}else{if(this.id.match(/^name-recruit-[0-9]/)!==null){b[sqMissionSolver.activeSquadron][this.id]=typeof sqMissionSolver.squadron[c][8]!=="undefined"?sqMissionSolver.squadron[c][8].toString():""}else{if(this.id.match(/^exp-recruit-[0-9]/)!==null){b[sqMissionSolver.activeSquadron][this.id]=typeof sqMissionSolver.squadron[c][5]!=="undefined"?sqMissionSolver.squadron[c][5].toString():""}else{if(this.id.match(/^chemistry-recruit-[0-9]/)!==null){b[sqMissionSolver.activeSquadron][this.id]=typeof sqMissionSolver.squadron[c][6]!=="undefined"&&(sqMissionSolver.squadron[c][6].length==4||sqMissionSolver.squadron[c][6].length==5)?sqMissionSolver.squadron[c][6].join("|"):""}else{if(this.id.match(/^use-recruit-[0-9]/)!==null){b[sqMissionSolver.activeSquadron][this.id]=typeof sqMissionSolver.squadron[c][7]!=="undefined"?sqMissionSolver.squadron[c][7].toString():""}else{b[sqMissionSolver.activeSquadron][this.id]=$("#"+this.id).val()}}}}}}}});localStorage.setItem("squadron",JSON.stringify(b))},setActiveSquadron:function(b,a){$("#squadrons-list a").removeClass("active");b.addClass("active");sqMissionSolver.activeSquadron=b.prop("id").slice(-1);$("#possible, #processed").html("");$("#how-to-use").show();if(a==true){var b=sqMissionSolver.getSquadron();b.activeSquadron=sqMissionSolver.activeSquadron;localStorage.setItem("squadron",JSON.stringify(b));sqMissionSolver.load()}},setActiveTraining:function(a){var b=$(a).hasClass("active");$(".training-icon").removeClass("active");$("#b-apply-training").attr("disabled",true);if(b!==true){$("#b-apply-training").attr("disabled",false);$(a).addClass("active")}sqMissionSolver.deactiveConfirmTraining()},updateClassesExp:function(){$("#select-classes-exp").html("");$("select.recruit").each(function(d,f){if(sqMissionSolver.squadron[d]&&$(f).val()!==""&&sqMissionSolver.squadron[d][9]==true){var a=d+1;var b=sqMissionSolver.capitalize(sqMissionSolver.squadron[d][2]);var g=sqMissionSolver.squadron[d][3];var e=sqMissionSolver.squadron[d][4]!==""?sqMissionSolver.capitalize(sqMissionSolver.squadron[d][4]):"Unknown race";var c=sqMissionSolver.squadron[d][8]!==""?sqMissionSolver.capitalize(sqMissionSolver.squadron[d][8]):"Unknown name";$('<img src="img/'+$(this).val()+'.png" id="training-recruit-'+d+'" title="'+a+". "+b+" - "+g+" - "+e+" - "+c+'" />').appendTo("#select-classes-exp")}if($(f).val()==""){$("#training-recruit-"+d).remove()}})},updateMissionBonus:function(){sqMissionSolver.missionBonus=[$("#mission-bonus-1").val(),$("#mission-bonus-2").val(),$("#mission-bonus-3").val()]},setClassesForExp:function(a){$(a).toggleClass("active");var b=$("#select-classes-exp img.active").length;if(b==5){$("#select-classes-exp img.active").not(a).first().toggleClass("active")}},generateSquadron:function(){sqMissionSolver.squadron=[];var c=$("select.recruit");var b={};var a={};c.each(function(){var g=this.id;var l=$(this).val();var e=parseInt($("#level-"+g).val());var j=$("#race-"+g).val();var f=$("#name-"+g).val();var h=parseInt($("#exp-"+g).val())||0;var k=$("#chemistry-"+g).val();var d=$("#use-"+g).prop("checked");if(typeof a[l]=="undefined"){a[l]=1}else{a[l]+=1}if(typeof b[j]=="undefined"){b[j]=1}else{b[j]+=1}$(this).parent().find('select, input[type="text"]').removeClass("missing-data");$(this).parent().find("select, input").removeClass("excluded");if(isNaN(e)){$("#level-"+g).val("1");e=1}var i=[];i.push(sqMissionSolver.squadron.length);i.push(l!==""?sqMissionSolver.stats[l][e-1].slice():0);i.push(l);i.push(e);i.push(j);i.push(h);if(k!=""){i.push(k.split("|"))}else{i.push(k)}i.push(d);i.push(f);i.push(l==""||j==""?false:true);i.push(!!(i[7]*i[9]));sqMissionSolver.squadron.push(i);if(i[9]==false){$(this).parent().find("select, input").addClass("missing-data");$("#exp-"+g).val("")}else{if(!d){$(this).parent().find("select, input").addClass("excluded")}}if(e==60){$("#exp-"+g).val("")}});sqMissionSolver.setExp()},checkCurrentExp:function(b){var a=$(b).val();if(a==""||isNaN(parseInt(a))){a=0;$(b).val("0")}var c=Number($(b).next().html());if(c==0){$(b).val("")}else{if(a>=c){$(b).val(c-1)}}},setExp:function(a){if(a){var c=$(a).prev().prop("id");if($(a).val()==""&&$("#"+c).val()!==""){$(a).val("1")}else{if($(a).val()>0&&$("#"+c).val()==""){$(a).val("")}}var b=$(a).val()==60?"Max":sqMissionSolver.exp[$(a).val()-1];$("#exp-needed-"+c).html("");$("#exp-needed-"+c).html(b)}else{$(".level-recruit").each(function(){sqMissionSolver.setExp(this)})}},getCombinations:function(c,b){var a=c.length;if(b>a){return[]}if(!b){return[[]]}if(b==a){return[c]}return c.reduce(function(f,g,e){var d=sqMissionSolver.getCombinations(c.slice(e+1),b-1).map(function(h){return[g].concat(h)});return f.concat(d)},[])},getTotalStats:function(d){var o=[[0,0,0],[0,0,0],[0,0,0],[0,0,0]];var e=[false,false,false,false];var p=["phy","men","tac"];var m=0;for(var g=0;g<=3;g+=1){if(d[g][6].length>=4){var n=d[g][6];if(n[2]!="exp"){var f=sqMissionSolver.isChemistryActivated(d,g,true,[d[0][4],d[1][4],d[2][4],d[3][4]],[d[0][2],d[1][2],d[2][2],d[3][2]],n);if(f==true&&sqMissionSolver.nonMandatoryChem.indexOf(n[2])==-1){e[g]=true;if((d[g][2]==sqMissionSolver.missionBonus[0]||d[g][2]==sqMissionSolver.missionBonus[1]||d[g][2]==sqMissionSolver.missionBonus[2])||((d[g][4]==sqMissionSolver.missionBonus[0]||d[g][4]==sqMissionSolver.missionBonus[1]||d[g][4]==sqMissionSolver.missionBonus[2])&&d[g][4]!=="")){var l=1+(n[1]*2/100)}else{var l=1+(n[1]/100)}var q=n[3]=="true"?true:false;var k=p.indexOf(n[2]);if(q==false){o[g][k]+=(Math.floor(d[g][1][k]*l)-d[g][1][k])}else{for(var c=0;c<=3;c+=1){o[c][k]+=(Math.floor(d[c][1][k]*l)-d[c][1][k])}}}else{if(f==true&&sqMissionSolver.nonMandatoryChem.indexOf(n[2])!==-1){e[g]=true}}if(f==true&&!isNaN(parseInt(n[4]))){m+=Number(n[4])}}}}var b=d[0][1][0]+d[1][1][0]+d[2][1][0]+d[3][1][0];var a=d[0][1][1]+d[1][1][1]+d[2][1][1]+d[3][1][1];var h=d[0][1][2]+d[1][1][2]+d[2][1][2]+d[3][1][2];return[b,a,h,o,e,m]},isChemistryActivated:function(c,b,g,e,a,f){switch(f[0]){case"same_class":f[0]=c[b][2];break;case"same_race":f[0]=c[b][4];break;case"no_same_class":f[0]="_"+c[b][2];break;case"no_same_race":f[0]="_"+c[b][4];break;case"diff_class":var d=a.filter(function(h){return h===c[b][2]}).length;if(d==1){return true}break;case"diff_race":var d=e.filter(function(h){return h===c[b][4]}).length;if(d==1){return true}break;case"3+_class":if((a[0]==a[1]&&a[1]==a[2])||(a[1]==a[2]&&a[2]==a[3])||(a[0]==a[1]&&a[1]==a[3])||(a[0]==a[2]&&a[2]==a[3])){return true}break;case"3+_race":if((e[0]==e[1]&&e[1]==e[2])||(e[1]==e[2]&&e[2]==e[3])||(e[0]==e[1]&&e[1]==e[3])||(e[0]==e[2]&&e[2]==e[3])){return true}break;case"all_diff_class":if(a[0]!=a[1]&&a[0]!=a[2]&&a[0]!=a[3]&&a[1]!=a[2]&&a[1]!=a[3]&&a[2]!=a[3]){return true}break;case"all_diff_race":if(e[0]!=e[1]&&e[0]!=e[2]&&e[0]!=e[3]&&e[1]!=e[2]&&e[1]!=e[3]&&e[2]!=e[3]){return true}break;case"m_level":if(c[b][3]>=sqMissionSolver.missionLevel){return true}break;case"in_squadron":if(g==true){return true}break;case"above_50":if(Number(c[b][3])>=50){return true}break;case"affinity":if(sqMissionSolver.missionBonus[0]==c[b][2]||sqMissionSolver.missionBonus[0]==c[b][4]||sqMissionSolver.missionBonus[1]==c[b][2]||sqMissionSolver.missionBonus[1]==c[b][4]||sqMissionSolver.missionBonus[2]==c[b][2]||sqMissionSolver.missionBonus[2]==c[b][4]){return true}else{return false}break}e[b]=null;a[b]=null;if((f[0][0]!=="_"&&(e.indexOf(f[0])>-1||a.indexOf(f[0])>-1||sqMissionSolver.missionBonus.indexOf(c[b][2])>-1||sqMissionSolver.missionBonus.indexOf(c[b][4])>-1))){return true}else{if((f[0][0]=="_"&&(e.indexOf(f[0].substr(1))==-1&&a.indexOf(f[0].substr(1))==-1||sqMissionSolver.missionBonus.indexOf(c[b][2])>-1||sqMissionSolver.missionBonus.indexOf(c[b][4])>-1))){return true}else{return false}}},resolve:function(){sqMissionSolver.reset();$("#how-to-use").hide();if(sqMissionSolver.getSquadron()[sqMissionSolver.activeSquadron].length==0||sqMissionSolver.squadron.filter(function(h){return h.length>0&&h[10]==true}).length<4){$("#possible").prepend('<div class="result-line"><div id="not-possible">Minimo 4 membri (selezionati) con tutti i campi compilati (classe, livello, razza) per iniziare una simulazione.</div></div>');return false}var d=JSON.parse(JSON.stringify(sqMissionSolver.squadron.filter(function(h){return h[10]==true?h:false})));d=d.filter(function(h){return h.length>0});var a=sqMissionSolver.getCombinations(d,4);var f=a.length;var b=[];var e=[];sqMissionSolver.getAllPossiblePermutations([1,2,3,4,5,6,7],sqMissionSolver.maxTrainings,b);sqMissionSolver.getAllPossiblePermutations([1,2,3,4,5,6],sqMissionSolver.maxTrainings,e);$("#possible").html('<div class="result-line"><div id="calc-in-progress">Attendi.</div></div>');var c=false;var g=new Date().getTime();setTimeout(function(){for(var B=0;B<f;B+=1){var D=a[B];var v=sqMissionSolver.getTotalStats(D);var F=v[0]+sqMissionSolver.bonusSquadron[0];var s=v[1]+sqMissionSolver.bonusSquadron[1];var m=v[2]+sqMissionSolver.bonusSquadron[2];var K=v[3];var i=v[3][0][0]+v[3][1][0]+v[3][2][0]+v[3][3][0];var w=v[3][0][1]+v[3][1][1]+v[3][2][1]+v[3][3][1];var I=v[3][0][2]+v[3][1][2]+v[3][2][2]+v[3][3][2];F+=i;s+=w;m+=I;var z=[D[0],D[1],D[2],D[3]];var x=D[0][3]+D[1][3]+D[2][3]+D[3][3];if(x==240){var h=e.length;b=e}else{var h=b.length}if((F<sqMissionSolver.missionGoals[0]||s<sqMissionSolver.missionGoals[1]||m<sqMissionSolver.missionGoals[2])&&sqMissionSolver.maxTrainings>0){var p=sqMissionSolver.missionGoals[0]-F;var G=sqMissionSolver.missionGoals[1]-s;var y=sqMissionSolver.missionGoals[2]-m;if(F>=sqMissionSolver.missionGoals[0]^s>=sqMissionSolver.missionGoals[1]?m>=sqMissionSolver.missionGoals[2]:F>=sqMissionSolver.missionGoals[0]){var u=(p>0?p:0)+(G>0?G:0)+(y>0?y:0);sqMissionSolver.almostMatching.push([z,sqMissionSolver.bonusSquadron,[],K,u])}var o=sqMissionSolver.maxTrainings;var r=[];for(var E=0;E<h;E+=1){var A=[];for(var C=0;C<=3;C+=1){A[C]=[D[C][0],[D[C][1][0],D[C][1][1],D[C][1][2]],D[C][2],D[C][3],D[C][4],D[C][5],D[C][6],D[C][7],D[C][8]]}switch(b[E].length){case 0:var J=[];break;case 1:var J=[b[E][0]];break;case 2:var J=[b[E][0],b[E][1]];break;case 3:var J=[b[E][0],b[E][1],b[E][2]];break;case 4:var J=[b[E][0],b[E][1],b[E][2],b[E][3]];break;case 5:var J=[b[E][0],b[E][1],b[E][2],b[E][3],b[E][4]];break;case 6:var J=[b[E][0],b[E][1],b[E][2],b[E][3],b[E][4],b[E][5]];break}var t=sqMissionSolver.generateTraining(A,false,false,false,J,o,false,v);if(t[3]<o){o=t[3];r=[]}if(t!==false){r.push([t[0],t[1],t[2],t[4],v[4],v[5]]);c=true}if(E==h-1){if(r.length>0){sqMissionSolver.processResult(r,false)}}}}else{if(F>=sqMissionSolver.missionGoals[0]&&s>=sqMissionSolver.missionGoals[1]&&m>=sqMissionSolver.missionGoals[2]){sqMissionSolver.processResult([[z,sqMissionSolver.bonusSquadron,[],JSON.parse(JSON.stringify(K)),v[4],v[5]]],false);c=true}else{var p=sqMissionSolver.missionGoals[0]-F;var G=sqMissionSolver.missionGoals[1]-s;var y=sqMissionSolver.missionGoals[2]-m;if(F>=sqMissionSolver.missionGoals[0]^s>=sqMissionSolver.missionGoals[1]?m>=sqMissionSolver.missionGoals[2]:F>=sqMissionSolver.missionGoals[0]){var u=(p>0?p:0)+(G>0?G:0)+(y>0?y:0);sqMissionSolver.almostMatching.push([[D[0],D[1],D[2],D[3]],sqMissionSolver.bonusSquadron,[],K,u])}}}if(B==f-1&&c==false){var H=sqMissionSolver.almostMatching.length;$.each(sqMissionSolver.almostMatching,function(j){var k=j==H-1?true:false;sqMissionSolver.processResult(this,true,k)});if(H==0){$("#possible").html('<div class="result-line"><div id="not-possible">No acceptable result found. <p>You cannot do this mission with the selected recruits and all the 3 stats matched in '+sqMissionSolver.maxTrainings+" training(s) or less, and you cannot match 2 of the 3 stats without training. It's maybe possible to match 2 of 3 stats with trainings, but these results are not displayed yet.</p></div></div>")}}if(B==f-1){var n=new Date().getTime();var q=n-g;console.log("Execution time: "+q)}}},0)},processResult:function(p,n,i){$("#calc-in-progress").parent().remove();if(p.length>=1&&n==false){p.sort(function(w,v){return w[2].length-v[2].length||v[2].filter(function(x){return x==7}).length-w[2].filter(function(x){return x==7}).length});p=JSON.parse(JSON.stringify(p[0]));var s=p[2].length;var u=p[2].filter(function(v){return v==7}).length;var r=p[0][0][3]+p[0][1][3]+p[0][2][3]+p[0][3][3];var k=Number(p[4][0])+Number(p[4][1])+Number(p[4][2])+Number(p[4][3]);var m=$('<div class="result-line" data-trainings="'+s+'" data-level="'+r+'" data-priority="'+u+'" data-chemPriority="'+p[5]+'" data-chemistries="'+k+'"></div>')}else{if(n==true){var m=$('<div class="result-line" data-missing-points="'+p[4]+'"></div>')}}var b=$('<div class="squadron"><div class="title-stat">Squadrone</div></div>').appendTo(m);var h=$('<div class="stats-and-training"></div>').appendTo(m);var g=$('<div class="training"><div class="title-stat">Allenamento</div></div>');var q=$('<div class="images-training"></div>').appendTo(g);var t="#possible";var f=[0,0,0];var d=[0,0,0];var c=false;$.each(p[0],function(x,z){f=$.map(f,function(C,B){return C+=sqMissionSolver.squadron[z[0]][1][B]});d=$.map(d,function(C,B){return C+=z[1][B]});var A=p[4][x]==true?"chemistry":"";var y=sqMissionSolver.capitalize(p[0][x][4]);var w=p[0][x][8]!==""?sqMissionSolver.capitalize(p[0][x][8]):"Unknown name";var v=sqMissionSolver.squadron[z[0]][3];$('<div class="images"><img src="img/'+z[2]+'.png" title="'+(sqMissionSolver.squadron[z[0]][0]+1)+". "+sqMissionSolver.capitalize(sqMissionSolver.squadron[z[0]][2])+" - "+sqMissionSolver.squadron[z[0]][3]+" - "+y+" - "+w+'"/><div class="niveau '+A+'">'+z[3]+'</div><div class="niveau '+A+'">('+v+")</div></div>").appendTo(b)});$.each(p[2],function(v,w){$('<img src="img/'+w+'.png" />').appendTo(q);c=true});if(c==true){g.appendTo(h)}f=$.map(f,function(w,v){return w+=sqMissionSolver.bonusSquadron[v]});d=$.map(d,function(w,v){return w+=p[1][v]+p[3][0][v]+p[3][1][v]+p[3][2][v]+p[3][3][v]});var e=["green","green","green"];var o=["green","green","green"];$.each(e,function(v,w){if(f[v]<sqMissionSolver.missionGoals[v]){e[v]="red"}if(d[v]<sqMissionSolver.missionGoals[v]){o[v]="red"}});var a="";var l=0;$.each(p[4],function(v,w){if(w==true&&p[0][v][6][2]==="chem_percentage"){l+=Number(p[0][v][6][1])}});$.each(p[4],function(v,x){if(x==true&&p[0][v][6][2]!=="phy"&&p[0][v][6][2]!=="men"&&p[0][v][6][2]!=="tac"&&p[0][v][6][2]!=="exp"&&p[0][v][6][2]!=="chem_percentage"){var y=p[0][v][6][2];var w=sqMissionSolver.missionBonus.indexOf(p[0][v][2])>-1||sqMissionSolver.missionBonus.indexOf(p[0][v][4])>-1?100:Number(p[0][v][6][1])+Number(l);a+='<div><div class="img-chem"><img src="img/'+y+'.png" /></div><div class="val-chem">'+w+"%</div></div>"}});if(a!=""){$('<div class="chemistries"><div class="title-stat">Chemistries</div>'+a+"</div>").prependTo(h)}$('<div class="stats"><div class="title-stat">Final stats</div><div><div class="n-stat">PHY</div><span class="'+o[0]+'">'+d[0]+'</span></div><div><div class="n-stat">MEN</div><span class="'+o[1]+'">'+d[1]+'</span></div><div><div class="n-stat">TAC</div><span class="'+o[2]+'">'+d[2]+"</span></div></div>").prependTo(h);m.appendTo(t);var j=$(".result-line");if(n==false){j.sort(function(w,v){return $(w).attr("data-trainings")-$(v).attr("data-trainings")||$(w).attr("data-level")-$(v).attr("data-level")||$(v).attr("data-priority")-$(w).attr("data-priority")||$(v).attr("data-chemPriority")-$(w).attr("data-chemPriority")||$(v).attr("data-chemistries")-$(w).attr("data-chemistries")});$("#possible").html(j)}else{var j=$(".result-line");j.sort(function(w,v){return $(w).attr("data-missing-points")-$(v).attr("data-missing-points")});if(i==true){$("#possible").html(j).prepend('<div class="result-line"><div id="not-possible">No solution found to match the 3 stats in '+sqMissionSolver.maxTrainings+" training(s) or less. The following combinations only match 2 of the 3 stats, without training. Please note that the chemistries are not marked as activated even if they are, for these results. This will come at a later time.</div></div>")}}},addExp:function(a){var d=0;var b;if(!isNaN(parseInt($("#command-exp-reward").val()))){d=parseInt($("#command-exp-reward").val());b="command"}else{if(!isNaN(parseInt($("#trainee-exp-reward").val()))){d=parseInt($("#trainee-exp-reward").val());b="trainee"}}var c=[];$("#select-classes-exp img.active").each(function(){var e=parseInt(this.id.slice(-1));c.push(e)});if(d>0&&c.length==3&&b=="command"){sqMissionSolver.squadron=sqMissionSolver.generateExpGain(sqMissionSolver.squadron,d,c,true,"command");sqMissionSolver.saveFromObject();sqMissionSolver.load();$("#command-exp-reward").val("");$("#select-classes-exp img.active").removeClass("active")}else{if(d>0&&c.length==4&&b=="trainee"){sqMissionSolver.squadron=sqMissionSolver.generateExpGain(sqMissionSolver.squadron,d,c,true,null);sqMissionSolver.saveFromObject();sqMissionSolver.load();$("#trainee-exp-reward").val("");$("#select-classes-exp img.active").removeClass("active")}}$("#b-apply-exp-reward").attr("disabled",true)},generateExpGain:function(d,c,l,n,m){for(var f=0,b=d.length;f<b;f+=1){var j=d[f];if(j[9]===false){continue}var a=l.length;if((l&&a>0&&l.indexOf(j[0])>-1)||!l&&j[2]&&j[2]!==""){var h=1;if(l&&a>0&&n==true){if(j[6]!=""){var k=j[6];if(k[2]=="exp"){var e=sqMissionSolver.isChemistryActivated(d,f,n,[d[0][4],d[1][4],d[2][4],d[3][4]],[d[0][2],d[1][2],d[2][2],d[3][2]],k);if(e==true&&k[2]=="exp"){h+=k[1]/100;if(sqMissionSolver.missionBonus.indexOf(j[2])>-1||sqMissionSolver.missionBonus.indexOf(j[4])>-1&&j[4]){h+=k[1]/100}}}}}var o=sqMissionSolver.exp[j[3]-1];j[5]+=parseInt(c*h);while(j[5]>=o&&j[3]<60){var g=sqMissionSolver.stats[j[2]][j[3]];j[1][0]=g[0];j[1][1]=g[1];j[1][2]=g[2];j[5]-=o;j[3]+=1;o=sqMissionSolver.exp[j[3]-1]}if(j[3]==60){j[5]=0}}}return d},activeConfirmTraining:function(){if($(".training-icon.active").length==1){$("#b-confirm-training").prop("disabled",false)}},deactiveConfirmTraining:function(){$("#b-confirm-training").prop("disabled",true)},transformTraining:function(a,c,b){if(!b){b=sqMissionSolver.bonusSquadron}switch(c){case 0:if(b[1]==0){a[c]=[40,0,-40]}if(b[2]==0){a[c]=[40,-40,0]}break;case 1:if(b[0]==0){a[c]=[0,40,-40]}if(b[2]==0){a[c]=[-40,40,0]}break;case 2:if(b[0]==0){a[c]=[0,-40,40]}if(b[1]==0){a[c]=[-40,0,40]}break}return a},applyTraining:function(){var j=$(".training-icon.active");var a=Number(j.prop("id").slice(-1))-1;var i=sqMissionSolver.squadronRank;var e=sqMissionSolver.bonusSquadron;var h=sqMissionSolver.trainings.slice(0);h=sqMissionSolver.transformTraining(h,a);if((e[0]+h[a][0]<=i&&e[0]+h[a][0]>=0&&e[1]+h[a][1]<=i&&e[1]+h[a][1]>=0&&e[2]+h[a][2]<=i&&e[2]+h[a][2]>=0)||e[0]+e[1]+e[2]<i){var d=$("#b-phy");var b=$("#b-men");var f=$("#b-tac");if(sqMissionSolver.bonusSquadron[0]+sqMissionSolver.bonusSquadron[1]+sqMissionSolver.bonusSquadron[2]<i){sqMissionSolver.bonusSquadron[0]=Number(d.val())+(h[a][0]>0?h[a][0]:0);sqMissionSolver.bonusSquadron[1]=Number(b.val())+(h[a][1]>0?h[a][1]:0);sqMissionSolver.bonusSquadron[2]=Number(f.val())+(h[a][2]>0?h[a][2]:0)}else{sqMissionSolver.bonusSquadron[0]=Number(d.val())+h[a][0];sqMissionSolver.bonusSquadron[1]=Number(b.val())+h[a][1];sqMissionSolver.bonusSquadron[2]=Number(f.val())+h[a][2]}d.val(sqMissionSolver.bonusSquadron[0]);b.val(sqMissionSolver.bonusSquadron[1]);f.val(sqMissionSolver.bonusSquadron[2]);var g=[];var c=$("#select-classes-exp img.active").each(function(){var k=Number(this.id.slice(-1));g.push(k)});g=g.length>0&&g.length<=4?g:false;sqMissionSolver.deactiveConfirmTraining();sqMissionSolver.squadron=sqMissionSolver.generateExpGain(sqMissionSolver.squadron,sqMissionSolver.expTrainings[a],g,false,null);sqMissionSolver.saveFromObject();sqMissionSolver.load()}},getPermutations:function(e,c,a,d){if(a.length>=c){d.push(a)}else{var b;for(b=0;b<e.length;++b){sqMissionSolver.getPermutations(e,c,a.concat(e[b]),d)}}},getAllPossiblePermutations:function(c,a,b){sqMissionSolver.getPermutations(c,a,[],b)},generateTraining:function(e,k,p,d,r,w,s,h){if(s==false){k=sqMissionSolver.bonusSquadron.slice();if(sqMissionSolver.maxTrainings==0){return k}var d=0;var p=[]}if(d>=w){return false}switch(r[0]){case 1:if(sqMissionSolver.squadronRank-k[0]<40){return false}break;case 2:if(sqMissionSolver.squadronRank-k[1]<40){return false}break;case 3:if(sqMissionSolver.squadronRank-k[2]<40){return false}break;case 4:if(k[2]<40||sqMissionSolver.squadronRank-k[0]==0||sqMissionSolver.squadronRank-k[1]==0){return false}break;case 5:if(k[1]<40||sqMissionSolver.squadronRank-k[0]==0||sqMissionSolver.squadronRank-k[2]==0){return false}break;case 6:if(k[0]<40||sqMissionSolver.squadronRank-k[1]==0||sqMissionSolver.squadronRank-k[2]==0){return false}break}var g=r[0]==7?3000:2000;var l=r[0]-1;var q=sqMissionSolver.trainings.slice(0);q=sqMissionSolver.transformTraining(q,l,k);var m=e[0][3]+e[1][3]+e[2][3]+e[3][3];if(m<240){e=sqMissionSolver.generateExpGain(e,g,false,false,null)}var i=e[0][3]+e[1][3]+e[2][3]+e[3][3];if(i>m||!h){var h=sqMissionSolver.getTotalStats(e)}var o=h[0]+k[0];var f=h[1]+k[1];var b=h[2]+k[2];var v=h[3];var a=v[0][0]+v[1][0]+v[2][0]+v[3][0];var j=v[0][1]+v[1][1]+v[2][1]+v[3][1];var u=v[0][2]+v[1][2]+v[2][2]+v[3][2];o+=a;f+=j;b+=u;var n=sqMissionSolver.missionGoals[0]-o-q[l][0];var c=sqMissionSolver.missionGoals[1]-f-q[l][1];var t=sqMissionSolver.missionGoals[2]-b-q[l][2];if(k[0]+k[1]+k[2]<sqMissionSolver.squadronRank){k[0]+=q[l][0]>0?q[l][0]:0;k[1]+=q[l][1]>0?q[l][1]:0;k[2]+=q[l][2]>0?q[l][2]:0}else{k[0]+=q[l][0];k[1]+=q[l][1];k[2]+=q[l][2]}d+=1;p.push(r[0]);if(n<=0&&c<=0&&t<=0){return[e,k,p,d,v]}else{if(r.length==1){return false}else{r.shift();return sqMissionSolver.generateTraining(e,k,p,d,r,w,true,h)}}},openChemistry:function(b){$("#c-window-chemistry").show();$("#windows").fadeIn(100);$("#windows").on("click",function(c){if($(c.target).parent()[0]==$(this)[0]){$(this).off();$(this).fadeOut(100);$("> div",this).hide()}});sqMissionSolver.chemistry=Number($(b).next().prop("id").slice(-1));$("#all_members").removeAttr("checked");if(sqMissionSolver.squadron[sqMissionSolver.chemistry-1][6]!=""){var a=sqMissionSolver.squadron[sqMissionSolver.chemistry-1][6];$("#trigger-chemistry").val(a[0]);$("#bonus-chemistry").val(a[1]);$("#stat-chemistry").val(a[2]);if(a[3]=="true"){$("#all_members").prop("checked",true)}$("input:radio").prop("checked",false);if(!isNaN(Number(a[4]))){$("input[name=priority-chemistry][value="+a[4]+"]").prop("checked","checked")}}else{$("#trigger-chemistry, #bonus-chemistry, #stat-chemistry").val("");$("input:radio").prop("checked",false)}},applyChemistry:function(){var c=$("#trigger-chemistry").val();var h=$("#bonus-chemistry").val();var e=$("#stat-chemistry").val();var d=$("#all_members").is(":checked");var g=$("#chemistry-recruit-"+sqMissionSolver.chemistry);var a=sqMissionSolver.chemistry-1;var b=$("input[name=priority-chemistry]:checked").val();if(c!=""&&h!=""&&e!=""&&!isNaN(parseInt(b))){$("#windows").off().fadeOut(100);$("#windows > div").hide();var f=c+"|"+h+"|"+e+"|"+d+"|"+b;g.val(f);sqMissionSolver.squadron[a][6]=[c,h,e,d,b];sqMissionSolver.saveFromObject();$(g).prev().addClass("active")}},applyRenameSquadron:function(){var a={"1":$("#name-sq-1").val(),"2":$("#name-sq-2").val(),"3":$("#name-sq-3").val(),"4":$("#name-sq-4").val(),"5":$("#name-sq-5").val()};localStorage.setItem("squadronNames",JSON.stringify(a));sqMissionSolver.updateSquadronNames();$("#windows").off().fadeOut(100);$("#windows > div").hide()},deleteChemistry:function(){$("#windows").off().fadeOut(100);$("#windows > div").hide();var b=$("#chemistry-recruit-"+sqMissionSolver.chemistry);var a=sqMissionSolver.chemistry-1;b.val("");sqMissionSolver.squadron[a][6]="";sqMissionSolver.saveFromObject();$(b).prev().removeClass("active")},openRenameSquadrons:function(){$("#c-window-rename").show();var b=JSON.parse(localStorage.getItem("squadronNames"));for(var a=1;a<=5;a++){$("#name-sq-"+a).val(b[a])}$("#windows").fadeIn(100);$("#windows").on("click",function(c){if($(c.target).parent()[0]==$(this)[0]){$(this).off();$(this).fadeOut(100);$("> div",this).hide()}})},openExportSquadron:function(){$("#c-window-export").show();$("#export-text").val("");var b=sqMissionSolver.getSquadron();if(Object.keys(b[sqMissionSolver.activeSquadron]).length>0){var a=JSON.stringify(b[sqMissionSolver.activeSquadron]);$("#export-text").val(btoa(a))}$("#windows").fadeIn(100);$("#windows").on("click",function(c){if($(c.target).parent()[0]==$(this)[0]){$(this).off();$(this).fadeOut(100);$("> div",this).hide()}})},openImportSquadron:function(){$("#c-window-import").show();$("#import-text").val("");$("#windows").fadeIn(100);$("#windows").on("click",function(a){if($(a.target).parent()[0]==$(this)[0]){$(this).off();$(this).fadeOut(100);$("> div",this).hide()}})},importSquadron:function(){var a=atob($("#import-text").val());try{JSON.parse(a)}catch(b){$("#import-text").val("Invalid import code.");return false}var c=sqMissionSolver.getSquadron();c[sqMissionSolver.activeSquadron]=JSON.parse(a);localStorage.setItem("squadron",JSON.stringify(c));sqMissionSolver.load();$("#import-text").val("");$("#windows").off().fadeOut(100);$("#windows > div").hide()},openClearSquadron:function(){$("#c-window-clear").show();$("#clear-text").val("");$("#windows").fadeIn(100);$("#windows").on("click",function(a){if($(a.target).parent()[0]==$(this)[0]){$("#cancel-clear-squadron").off();$("#clear-squadron").off();$(this).off();$(this).fadeOut(100);$("> div",this).hide()}});$("#clear-squadron").one("click",function(){var a=sqMissionSolver.getSquadron();a[sqMissionSolver.activeSquadron]={};localStorage.setItem("squadron",JSON.stringify(a));sqMissionSolver.load();$("#windows").off().fadeOut(100);$("#windows > div").hide();$("#cancel-clear-squadron").off()});$("#cancel-clear-squadron").one("click",function(){$("#windows").off().fadeOut(100);$("#windows > div").hide();$("#clear-squadron").off()})}};sqMissionSolver.init()});